<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Medicine Reminders</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .reminder-box {
            background: white;
            padding: 25px;
            border-radius: 10px;
            width: 350px;
            margin: auto;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        input {
            width: 90%;
            padding: 8px;
            margin: 12px 0;
            border-radius: 6px;
            border: 1px solid #ccc;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        button {
            padding: 8px 15px;
            margin-top: 14px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }

        .add-btn {
            background-color: #4CAF50;
            color: white;
        }

        .scan-btn {
            background-color: #2196F3;
            color: white;
            margin-top: 25px;
        }

        .reminder-list {
            margin-top: 20px;
            text-align: left;
        }

        .reminder-item {
            background: #e9f5ff;
            padding: 8px 12px;
            border-radius: 6px;
            margin-top: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .delete-btn {
            background: transparent;
            color: red;
            font-weight: bold;
            cursor: pointer;
            border: none;
            font-size: 16px;
        }

        .heading-box {
            background: white;
            padding: 12px 30px;
            border-radius: 20px;
            display: block;
            width: fit-content;
            margin: 0 auto 25px auto;
            text-align: center;
        }

        .gradient-text {
            background: linear-gradient(to bottom right, #86efac, #10b981);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
            font-size: 26px;
            text-align: center;
        }

        /* TIMER BOX */
        #nextMedicineTimer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 10px 18px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            font-weight: bold;
            color: #10b981;
            z-index: 1000;
        }
    </style>
</head>

<body class="min-h-screen flex items-center justify-center bg-gradient-to-br from-green-300 to-emerald-500">
<!-- MINI HUD -->
<div id="miniHUD" class="fixed top-6 left-6 bg-white/90 p-4 rounded-2xl shadow-xl w-56 z-50">

  <p class="text-sm font-semibold mb-2">üçó Hunger</p>
  <div class="w-full bg-gray-200 rounded-full h-3 mb-3">
    <div id="hungerBar" class="bg-red-400 h-3 rounded-full"></div>
  </div>

  <p class="text-sm font-semibold mb-2">üíß Thirst</p>
  <div class="w-full bg-gray-200 rounded-full h-3 mb-3">
    <div id="thirstBar" class="bg-blue-400 h-3 rounded-full"></div>
  </div>

  <p class="text-sm font-semibold mb-2">üò¥ Sleep</p>
  <div class="w-full bg-gray-200 rounded-full h-3">
    <div id="sleepBar" class="bg-purple-400 h-3 rounded-full"></div>
  </div>

</div>
    <!-- TIMER DISPLAY -->
    <div id="nextMedicineTimer">
        Next medicine in: --:--:--
    </div>

    <div>
        <div class="heading-box">
            <h1 class="gradient-text">Medicine Reminder</h1>
        </div>
        <div class="fixed bottom-6 left-0 right-0 flex justify-center">
    <button 
        onclick="window.location.href='menu.html'"
        class="bg-white px-6 py-3 rounded-2xl shadow-xl
               hover:scale-105
               active:scale-95 active:shadow-md active:brightness-95
               transition duration-150
               font-semibold">

        <span class="bg-gradient-to-br from-green-300 to-emerald-500
                     bg-clip-text text-transparent">
            ‚¨Ö Back to Main Menu
        </span>

    </button>
            </div>
        <div class="reminder-box">
            <input type="text" id="medicineName" placeholder="Enter Medicine Name">
            <input type="time" id="medicineTime">

            <button class="add-btn" onclick="addReminder()">Add Medicine Reminder</button>

            <div class="reminder-list" id="reminderList"></div>

            <button class="scan-btn">Scan Prescription</button>
        </div>
    </div>
    
    <script src="script.js"></script>

    <script>
        let reminders = [];

        function addReminder() {
            const name = document.getElementById("medicineName").value;
            const time = document.getElementById("medicineTime").value;

            if (name === "" || time === "") {
                alert("Please enter both medicine name and time.");
                return;
            }

            const reminderList = document.getElementById("reminderList");

            const reminderItem = document.createElement("div");
            reminderItem.className = "reminder-item";

            const text = document.createElement("span");
            text.innerHTML = "<strong>" + name + "</strong> at " + time;

            const deleteBtn = document.createElement("button");
            deleteBtn.className = "delete-btn";
            deleteBtn.innerHTML = "‚úñ";

            const reminderData = { name, time };
            reminders.push(reminderData);

            deleteBtn.onclick = function() {
                reminderItem.remove();
                reminders = reminders.filter(r => !(r.name === name && r.time === time));
                updateTimer();
            };

            reminderItem.appendChild(text);
            reminderItem.appendChild(deleteBtn);
            reminderList.appendChild(reminderItem);

            document.getElementById("medicineName").value = "";
            document.getElementById("medicineTime").value = "";

            updateTimer();
        }

        function getNextReminder() {
            const now = new Date();
            let closest = null;

            reminders.forEach(reminder => {
                const [hours, minutes] = reminder.time.split(":");
                const reminderDate = new Date();
                reminderDate.setHours(hours, minutes, 0, 0);

                if (reminderDate < now) {
                    reminderDate.setDate(reminderDate.getDate() + 1);
                }

                if (!closest || reminderDate < closest) {
                    closest = reminderDate;
                }
            });

            return closest;
        }

        function updateTimer() {
            const timerBox = document.getElementById("nextMedicineTimer");
            const next = getNextReminder();

            if (!next) {
                timerBox.innerText = "No upcoming medicines";
                return;
            }

            const now = new Date();
            const diff = next - now;

            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff / (1000 * 60)) % 60);
            const seconds = Math.floor((diff / 1000) % 60);

            timerBox.innerText =
                "Next medicine in: " +
                String(hours).padStart(2, '0') + ":" +
                String(minutes).padStart(2, '0') + ":" +
                String(seconds).padStart(2, '0');
        }

        setInterval(updateTimer, 1000);

        document.addEventListener("DOMContentLoaded", () => {

    let stats = JSON.parse(localStorage.getItem("mediStats")) || {
        hunger: 80,
        thirst: 90,
        sleep: 75
    };

    updateMiniHUD(stats);
});
    </script>

</body>
</html>